<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="JavaScript," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="运算符是处理数据的基本方法，用来从现有数据得到新的数据。
加法运算符加法运算符（+）是最常见的运算符之一，但是使用规则却相对复杂。因为在JavaScript语言里面，这个运算符可以完成两种运算(+):

既可以处理算术的加法;
也可以用作字符串连接。

12345678// 加法1 + 1 // 2true + true // 21 + true // 2// 字符串连接&apos;1&apos; + &apos;1&apos; //">
<meta property="og:type" content="article">
<meta property="og:title" content="运算符（六）">
<meta property="og:url" content="openexw.github.io/2016/12/30/6. operator/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="运算符是处理数据的基本方法，用来从现有数据得到新的数据。
加法运算符加法运算符（+）是最常见的运算符之一，但是使用规则却相对复杂。因为在JavaScript语言里面，这个运算符可以完成两种运算(+):

既可以处理算术的加法;
也可以用作字符串连接。

12345678// 加法1 + 1 // 2true + true // 21 + true // 2// 字符串连接&apos;1&apos; + &apos;1&apos; //">
<meta property="og:updated_time" content="2016-12-30T01:20:40.878Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="运算符（六）">
<meta name="twitter:description" content="运算符是处理数据的基本方法，用来从现有数据得到新的数据。
加法运算符加法运算符（+）是最常见的运算符之一，但是使用规则却相对复杂。因为在JavaScript语言里面，这个运算符可以完成两种运算(+):

既可以处理算术的加法;
也可以用作字符串连接。

12345678// 加法1 + 1 // 2true + true // 21 + true // 2// 字符串连接&apos;1&apos; + &apos;1&apos; //">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="openexw.github.io/2016/12/30/6. operator/"/>





  <title> 运算符（六） | Hexo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hexo</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="openexw.github.io/2016/12/30/6. operator/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Openoter">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                运算符（六）
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-30T09:13:14+08:00">
                2016-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/12/30/6. operator/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/30/6. operator/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/30/6. operator/" class="leancloud_visitors" data-flag-title="运算符（六）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>运算符是处理数据的基本方法，用来从现有数据得到新的数据。</p>
<h2 id="加法运算符"><a href="#加法运算符" class="headerlink" title="加法运算符"></a>加法运算符</h2><p>加法运算符（<code>+</code>）是最常见的运算符之一，但是使用规则却相对复杂。因为在JavaScript语言里面，这个运算符可以完成两种运算(<code>+</code>):</p>
<ul>
<li>既可以处理算术的加法;</li>
<li>也可以用作字符串连接。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 加法</span></div><div class="line"><span class="number">1</span> + <span class="number">1</span> <span class="comment">// 2</span></div><div class="line"><span class="literal">true</span> + <span class="literal">true</span> <span class="comment">// 2</span></div><div class="line"><span class="number">1</span> + <span class="literal">true</span> <span class="comment">// 2</span></div><div class="line"></div><div class="line"><span class="comment">// 字符串连接</span></div><div class="line"><span class="string">'1'</span> + <span class="string">'1'</span> <span class="comment">// "11"</span></div><div class="line"><span class="string">'1.1'</span> + <span class="string">'1.1'</span> <span class="comment">// "1.11.1"</span></div></pre></td></tr></table></figure>
<p>它的算法步骤如下。</p>
<ol>
<li>如果运算子是对象，先自动转成原始类型的值（即先执行该对象的<code>valueOf</code>方法，如果结果还不是原始类型的值，再执行<code>toString</code>方法；如果对象是<code>Date</code>实例，则先执行<code>toString</code>方法）。</li>
<li>两个运算子都是原始类型的值以后，只要有一个运算子是字符串，则两个运算子都转为字符串，执行字符串连接运算。</li>
<li>否则，两个运算子都转为数值，执行加法运算。</li>
</ol>
<a id="more"></a>
<p>下面是一些例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">'1'</span> + &#123;<span class="attr">foo</span>: <span class="string">'bar'</span>&#125; <span class="comment">// "1[object Object]"</span></div><div class="line"><span class="string">'1'</span> + <span class="number">1</span> <span class="comment">// "11"</span></div><div class="line"><span class="string">'1'</span> + <span class="literal">true</span> <span class="comment">// "1true"</span></div><div class="line"><span class="string">'1'</span> + [<span class="number">1</span>] <span class="comment">// "11"</span></div></pre></td></tr></table></figure>
<p>上面代码中，由于运算符左边是一个字符串，导致右边的运算子都会先转为字符串，然后执行字符串连接运算。</p>
<p>这种由于参数不同，而改变自身行为的现象，叫做“重载”（overload）。由于加法运算符是运行时决定到底执行那种运算，使用的时候必须很小心。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">'3'</span> + <span class="number">4</span> + <span class="number">5</span> <span class="comment">// "345"</span></div><div class="line"><span class="number">3</span> + <span class="number">4</span> + <span class="string">'5'</span> <span class="comment">// "75"</span></div></pre></td></tr></table></figure>
<p>上面代码中，运算结果由于字符串的位置不同而不同。</p>
<p>下面的写法，可以用来将一个值转为字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x + <span class="string">''</span></div></pre></td></tr></table></figure>
<p>上面代码中，一个值加上空字符串，会使得该值转为字符串形式。</p>
<p>加法运算符会将其他类型的值，自动转为字符串，然后再执行连接运算。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>] + [<span class="number">3</span>]</div><div class="line"><span class="comment">// "1,23"</span></div><div class="line"></div><div class="line"><span class="comment">// 等同于</span></div><div class="line"><span class="built_in">String</span>([<span class="number">1</span>, <span class="number">2</span>]) + <span class="built_in">String</span>([<span class="number">3</span>])</div><div class="line"><span class="comment">// '1,2' + '3'</span></div></pre></td></tr></table></figure>
<p>上面代码中，两个数组相加，会先转成字符串，然后再连接。这种数据类型的自动转换，参见《数据类型转换》一节。</p>
<p>加法运算符一定有左右两个运算子，如果只有右边一个运算子，就是另一个运算符，叫做“数值运算符”。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+ - <span class="number">3</span> <span class="comment">// 等同于 +(-3)</span></div><div class="line">+ <span class="number">1</span> + <span class="number">2</span> <span class="comment">// 等同于 +(1 + 2)</span></div><div class="line">+ <span class="string">'1'</span> <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>上面代码中，数值运算符用于返回右边运算子的数值形式，详细解释见下文。</p>
<p>你可能会问，如果只有左边一个运算子，会出现什么情况？答案是会报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> +</div><div class="line"><span class="comment">// SyntaxError: Unexpected end of input</span></div></pre></td></tr></table></figure>
<p>加法运算符以外的其他算术运算符（比如减法、除法和乘法），都不会发生重载。它们的规则是：所有运算子一律转为数值，再进行相应的数学运算。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> - <span class="string">'2'</span> <span class="comment">// -1</span></div><div class="line"><span class="number">1</span> * <span class="string">'2'</span> <span class="comment">// 2</span></div><div class="line"><span class="number">1</span> / <span class="string">'2'</span> <span class="comment">// 0.5</span></div></pre></td></tr></table></figure>
<p>上面代码中，减法、除法和乘法运算符，都是将字符串自动转为数值，然后再运算。</p>
<p>由于加法运算符与其他算术运算符的这种差异，会导致一些意想不到的结果，计算时要小心。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">typeof</span> (now + <span class="number">1</span>) <span class="comment">// "string"</span></div><div class="line"><span class="keyword">typeof</span> (now - <span class="number">1</span>) <span class="comment">// "number"</span></div></pre></td></tr></table></figure>
<p>上面代码中，<code>now</code>是一个<code>Date</code>对象的实例。加法运算时，得到的是一个字符串；减法运算时，得到却是一个数值。</p>
<h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><p>JavaScript提供9个算术运算符，用来完成基本的算术运算。</p>
<ul>
<li><strong>加法运算符</strong>（Addition）：<code>x + y</code></li>
<li><strong>减法运算符</strong>（Subtraction）： <code>x - y</code></li>
<li><strong>乘法运算符</strong>（Multiplication）： <code>x * y</code></li>
<li><strong>除法运算符</strong>（Division）：<code>x / y</code></li>
<li><strong>余数运算符</strong>（Remainder）：<code>x % y</code></li>
<li><strong>自增运算符</strong>（Increment）：<code>++x</code> 或者 <code>x++</code></li>
<li><strong>自减运算符</strong>（Decrement）：<code>--x</code> 或者 <code>x--</code></li>
<li><strong>数值运算符</strong>（Convert to number）： <code>+x</code></li>
<li><strong>负数值运算符</strong>（Negate）：<code>-x</code></li>
</ul>
<p>减法、乘法、除法运算法比较单纯，就是执行相应的数学运算。下面介绍其他几个算术运算符。</p>
<h3 id="余数运算符"><a href="#余数运算符" class="headerlink" title="余数运算符"></a>余数运算符</h3><p>余数运算符（<code>%</code>）返回前一个运算子被后一个运算子除，所得的余数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">12</span> % <span class="number">5</span> <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<p>需要注意的是，运算结果的正负号由第一个运算子的正负号决定。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">-1</span> % <span class="number">2</span> <span class="comment">// -1</span></div><div class="line"><span class="number">1</span> % <span class="number">-2</span> <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>为了得到正确的负数的余数值，需要先使用绝对值函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 错误的写法</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isOdd</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> n % <span class="number">2</span> === <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line">isOdd(<span class="number">-5</span>) <span class="comment">// false</span></div><div class="line">isOdd(<span class="number">-4</span>) <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="comment">// 正确的写法</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isOdd</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.abs(n % <span class="number">2</span>) === <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line">isOdd(<span class="number">-5</span>) <span class="comment">// true</span></div><div class="line">isOdd(<span class="number">-4</span>) <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p>余数运算符还可以用于浮点数的运算。但是，由于浮点数不是精确的值，无法得到完全准确的结果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">6.5</span> % <span class="number">2.1</span></div><div class="line"><span class="comment">// 0.19999999999999973</span></div></pre></td></tr></table></figure>
<h3 id="自增和自减运算符"><a href="#自增和自减运算符" class="headerlink" title="自增和自减运算符"></a>自增和自减运算符</h3><p>自增和自减运算符，是一元运算符，只需要一个运算子。它们的作用是将运算子首先转为数值，然后加上1或者减去1。它们会修改原始变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</div><div class="line">++x <span class="comment">// 2</span></div><div class="line">x <span class="comment">// 2</span></div><div class="line"></div><div class="line">--x <span class="comment">// 1</span></div><div class="line">x <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>上面代码的变量<code>x</code>自增后，返回<code>2</code>，再进行自减，返回<code>1</code>。这两种情况都会使得，原始变量<code>x</code>的值发生改变。</p>
<p>自增和自减运算符有一个需要注意的地方，就是放在变量之后，会先返回变量操作前的值，再进行自增/自减操作；放在变量之前，会先进行自增/自减操作，再返回变量操作后的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> y = <span class="number">1</span>;</div><div class="line"></div><div class="line">x++ <span class="comment">// 1</span></div><div class="line">++y <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<p>上面代码中，<code>x</code>是先返回当前值，然后自增，所以得到<code>1</code>；<code>y</code>是先自增，然后返回新的值，所以得到<code>2</code>。</p>
<h3 id="数值运算符，负数值运算符"><a href="#数值运算符，负数值运算符" class="headerlink" title="数值运算符，负数值运算符"></a>数值运算符，负数值运算符</h3><p>数值运算符（<code>+</code>）同样使用加号，但是加法运算符是二元运算符（需要两个操作数），它是一元运算符（只需要一个操作数）。</p>
<p>数值运算符的作用在于可以将任何值转为数值（与<code>Number</code>函数的作用相同）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+<span class="literal">true</span> <span class="comment">// 1</span></div><div class="line">+[] <span class="comment">// 0</span></div><div class="line">+&#123;&#125; <span class="comment">// NaN</span></div></pre></td></tr></table></figure>
<p>上面代码表示，非数值类型的值经过数值运算符以后，都变成了数值（最后一行<code>NaN</code>也是数值）。具体的类型转换规则，参见《数据类型转换》一节。</p>
<p>负数值运算符（<code>-</code>），也同样具有将一个值转为数值的功能，只不过得到的值正负相反。连用两个负数值运算符，等同于数值运算符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</div><div class="line">-x <span class="comment">// -1</span></div><div class="line">-(-x) <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>上面代码最后一行的圆括号不可少，否则会变成递减运算符。</p>
<p>数值运算符号和负数值运算符，都会返回一个新的值，而不会改变原始变量的值。</p>
<h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h2><p>赋值运算符（Assignment Operators）用于给变量赋值。</p>
<p>最常见的赋值运算符，当然就是等号（<code>=</code>），表达式<code>x = y</code>表示将<code>y</code>的值赋给<code>x</code>。</p>
<p>除此之外，JavaScript还提供其他11个复合的赋值运算符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">x += y <span class="comment">// 等同于 x = x + y</span></div><div class="line">x -= y <span class="comment">// 等同于 x = x - y</span></div><div class="line">x *= y <span class="comment">// 等同于 x = x * y</span></div><div class="line">x /= y <span class="comment">// 等同于 x = x / y</span></div><div class="line">x %= y <span class="comment">// 等同于 x = x % y</span></div><div class="line">x &gt;&gt;= y <span class="comment">// 等同于 x = x &gt;&gt; y</span></div><div class="line">x &lt;&lt;= y <span class="comment">// 等同于 x = x &lt;&lt; y</span></div><div class="line">x &gt;&gt;&gt;= y <span class="comment">// 等同于 x = x &gt;&gt;&gt; y</span></div><div class="line">x &amp;= y <span class="comment">// 等同于 x = x &amp; y</span></div><div class="line">x |= y <span class="comment">// 等同于 x = x | y</span></div><div class="line">x ^= y <span class="comment">// 等同于 x = x ^ y</span></div></pre></td></tr></table></figure>
<p>这些复合的赋值运算符，都是先进行指定运算，然后将得到值返回给左边的变量。</p>
<h2 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h2><p>比较运算符用于比较两个值，然后返回一个布尔值，表示是否满足比较条件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">2</span> &gt; <span class="number">1</span> <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>上面代码比较<code>2</code>是否大于<code>1</code>，返回<code>true</code>。</p>
<p>JavaScript一共提供了8个比较运算符。</p>
<ul>
<li><code>==</code> 相等</li>
<li><code>===</code> 严格相等</li>
<li><code>!=</code> 不相等</li>
<li><code>!==</code> 严格不相等</li>
<li><code>&lt;</code> 小于</li>
<li><code>&lt;=</code> 小于或等于</li>
<li><code>&gt;</code> 大于</li>
<li><code>&gt;=</code> 大于或等于</li>
</ul>
<h3 id="比较运算符的算法"><a href="#比较运算符的算法" class="headerlink" title="比较运算符的算法"></a>比较运算符的算法</h3><p>比较运算符可以比较各种类型的值，不仅仅是数值。</p>
<p>除了相等运算符号和精确相等运算符，其他比较运算符的算法如下。</p>
<ol>
<li>如果两个运算子都是字符串，则按照字典顺序比较（实际上是比较Unicode码点）。</li>
<li>否则，将两个运算子都转成数值，再进行比较（等同于先调用<code>Number</code>函数）。</li>
</ol>
<p>下面的例子是两个原始类型的值之间的比较。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="number">5</span> &gt; <span class="string">'4'</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 5 &gt; Number('4')</span></div><div class="line"><span class="comment">// 即 5 &gt; 4</span></div><div class="line"></div><div class="line"><span class="literal">true</span> &gt; <span class="literal">false</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 Number(true) &gt; Number(false)</span></div><div class="line"><span class="comment">// 即 1 &gt; 0</span></div><div class="line"></div><div class="line"><span class="number">2</span> &gt; <span class="literal">true</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 2 &gt; Number(true)</span></div><div class="line"><span class="comment">// 即 2 &gt; 1</span></div></pre></td></tr></table></figure>
<p>上面代码中，字符串和布尔值都会先转成数值，再进行比较。</p>
<p>如果运算子是对象，必须先将其转为原始类型的值，即先调用<code>valueOf</code>方法，如果返回的还是对象，再接着调用<code>toString</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = [<span class="number">2</span>];</div><div class="line">x &gt; <span class="string">'11'</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 [2].valueOf().toString() &gt; '11'</span></div><div class="line"><span class="comment">// 即 '2' &gt; '11'</span></div><div class="line"></div><div class="line">x.valueOf = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">'1'</span> &#125;;</div><div class="line">x &gt; <span class="string">'11'</span> <span class="comment">// false</span></div><div class="line"><span class="comment">// 等同于 [2].valueOf() &gt; '11'</span></div><div class="line"><span class="comment">// 即 '1' &gt; '11'</span></div></pre></td></tr></table></figure>
<p>两个对象之间的比较也是如此。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[<span class="number">2</span>] &gt; [<span class="number">1</span>] <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 [2].valueOf().toString() &gt; [2].valueOf().toString()</span></div><div class="line"><span class="comment">// 即 '2' &gt; '1'</span></div><div class="line"></div><div class="line">[<span class="number">2</span>] &gt; [<span class="number">11</span>] <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 [2].valueOf().toString() &gt; [11].valueOf().toString()</span></div><div class="line"><span class="comment">// 即 '2' &lt; '11'</span></div><div class="line"></div><div class="line">&#123;<span class="attr">x</span>: <span class="number">2</span>&#125; &gt;= &#123;<span class="attr">x</span>: <span class="number">1</span>&#125; <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 &#123;x: 2&#125;.valueOf().toString() &gt;= &#123;x: 1&#125;.valueOf().toString()</span></div><div class="line"><span class="comment">// 即 '[object Object]' &gt;= '[object Object]'</span></div></pre></td></tr></table></figure>
<h3 id="字符串的比较"><a href="#字符串的比较" class="headerlink" title="字符串的比较"></a>字符串的比较</h3><p>字符串按照字典顺序进行比较。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">'cat'</span> &gt; <span class="string">'dog'</span> <span class="comment">// false</span></div><div class="line"><span class="string">'cat'</span> &gt; <span class="string">'catalog'</span> <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p>JavaScript引擎内部首先比较首字符的Unicode码点，如果相等，再比较第二个字符的Unicode码点，以此类推。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'cat'</span> &gt; <span class="string">'Cat'</span> <span class="comment">// true'</span></div></pre></td></tr></table></figure>
<p>上面代码中，小写的<code>c</code>的Unicode码点（<code>99</code>）大于大写的<code>C</code>的Unicode码点（<code>67</code>），所以返回<code>true</code>。</p>
<p>由于所有字符都有Unicode码点，因此汉字也可以比较。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">'大'</span> &gt; <span class="string">'小'</span> <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p>上面代码中，“大”的Unicode码点是22823，“小”是23567，因此返回<code>false</code>。</p>
<h3 id="严格相等运算符"><a href="#严格相等运算符" class="headerlink" title="严格相等运算符"></a>严格相等运算符</h3><p>JavaScript提供两个相等运算符：<code>==</code>和<code>===</code>。</p>
<p>简单说，它们的区别是相等运算符（<code>==</code>）比较两个值是否相等，严格相等运算符（<code>===</code>）比较它们是否为“同一个值”。如果两个值不是同一类型，严格相等运算符（<code>===</code>）直接返回<code>false</code>，而相等运算符（<code>==</code>）会将它们转化成同一个类型，再用严格相等运算符进行比较。</p>
<p>严格相等运算符的算法如下。</p>
<p><strong>（1）不同类型的值</strong></p>
<p>如果两个值的类型不同，直接返回<code>false</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> === <span class="string">"1"</span> <span class="comment">// false</span></div><div class="line"><span class="literal">true</span> === <span class="string">"true"</span> <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p>上面代码比较数值的<code>1</code>与字符串的“1”、布尔值的<code>true</code>与字符串“true”，因为类型不同，结果都是<code>false</code>。</p>
<p><strong>（2）同一类的原始类型值</strong></p>
<p>同一类型的原始类型的值（数值、字符串、布尔值）比较时，值相同就返回<code>true</code>，值不同就返回<code>false</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> === <span class="number">0x1</span> <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>上面代码比较十进制的<code>1</code>与十六进制的<code>1</code>，因为类型和值都相同，返回<code>true</code>。</p>
<p>需要注意的是，<code>NaN</code>与任何值都不相等（包括自身）。另外，正<code>0</code>等于负<code>0</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span>  <span class="comment">// false</span></div><div class="line">+<span class="number">0</span> === <span class="number">-0</span> <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p><strong>（3）同一类的复合类型值</strong></p>
<p>两个复合类型（对象、数组、函数）的数据比较时，不是比较它们的值是否相等，而是比较它们是否指向同一个对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;&#125; === &#123;&#125; <span class="comment">// false</span></div><div class="line">[] === [] <span class="comment">// false</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125; === <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;) <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p>上面代码分别比较两个空对象、两个空数组、两个空函数，结果都是不相等。原因是对于复合类型的值，严格相等运算比较的是，它们是否引用同一个内存地址，而运算符两边的空对象、空数组、空函数的值，都存放在不同的内存地址，结果当然是<code>false</code>。</p>
<p>如果两个变量引用同一个对象，则它们相等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> v1 = &#123;&#125;;</div><div class="line"><span class="keyword">var</span> v2 = v1;</div><div class="line">v1 === v2 <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>注意，对于两个对象的比较，严格相等运算符比较的是地址，而大于或小于运算符比较的是值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Date</span>() &gt; <span class="keyword">new</span> <span class="built_in">Date</span>() <span class="comment">// false</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Date</span>() &lt; <span class="keyword">new</span> <span class="built_in">Date</span>() <span class="comment">// false</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Date</span>() === <span class="keyword">new</span> <span class="built_in">Date</span>() <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p>上面的三个表达式，前两个比较的是值，最后一个比较的是地址，所以都返回<code>false</code>。</p>
<p><strong>（4）undefined 和 null</strong></p>
<p><code>undefined</code>和<code>null</code>与自身严格相等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="literal">undefined</span> === <span class="literal">undefined</span> <span class="comment">// true</span></div><div class="line"><span class="literal">null</span> === <span class="literal">null</span> <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>由于变量声明后默认值是<code>undefined</code>，因此两个只声明未赋值的变量是相等的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> v1;</div><div class="line"><span class="keyword">var</span> v2;</div><div class="line">v1 === v2 <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p><strong>（5）严格不相等运算符</strong></p>
<p>严格相等运算符有一个对应的“严格不相等运算符”（<code>!==</code>），两者的运算结果正好相反。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> !== <span class="string">'1'</span> <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h3 id="相等运算符"><a href="#相等运算符" class="headerlink" title="相等运算符"></a>相等运算符</h3><p>相等运算符比较相同类型的数据时，与严格相等运算符完全一样。</p>
<p>比较不同类型的数据时，相等运算符会先将数据进行类型转换，然后再用严格相等运算符比较。类型转换规则如下。</p>
<p><strong>（1）原始类型的值</strong></p>
<p>原始类型的数据会转换成数值类型再进行比较。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> == <span class="literal">true</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 1 === 1</span></div><div class="line"></div><div class="line"><span class="number">0</span> == <span class="literal">false</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 0 === 0</span></div><div class="line"></div><div class="line"><span class="number">2</span> == <span class="literal">true</span> <span class="comment">// false</span></div><div class="line"><span class="comment">// 等同于 2 === 1</span></div><div class="line"></div><div class="line"><span class="number">2</span> == <span class="literal">false</span> <span class="comment">// false</span></div><div class="line"><span class="comment">// 等同于 2 === 0</span></div><div class="line"></div><div class="line"><span class="string">'true'</span> == <span class="literal">true</span> <span class="comment">// false</span></div><div class="line"><span class="comment">// 等同于 Number('true') === Number(true)</span></div><div class="line"><span class="comment">// 等同于 NaN === 1</span></div><div class="line"></div><div class="line"><span class="string">''</span> == <span class="number">0</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 Number('') === 0</span></div><div class="line"><span class="comment">// 等同于 0 === 0</span></div><div class="line"></div><div class="line"><span class="string">''</span> == <span class="literal">false</span>  <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 Number('') === Number(false)</span></div><div class="line"><span class="comment">// 等同于 0 === 0</span></div><div class="line"></div><div class="line"><span class="string">'1'</span> == <span class="literal">true</span>  <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 Number('1') === Number(true)</span></div><div class="line"><span class="comment">// 等同于 1 === 1</span></div><div class="line"></div><div class="line"><span class="string">'\n  123  \t'</span> == <span class="number">123</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 因为字符串转为数字时，省略前置和后置的空格</span></div></pre></td></tr></table></figure>
<p>上面代码将字符串和布尔值都转为数值，然后再进行比较。具体的字符串与布尔值的类型转换规则，参见《数据类型转换》章节。</p>
<p><strong>（2）对象与原始类型值比较</strong></p>
<p>对象（这里指广义的对象，包括数组和函数）与原始类型的值比较时，对象转化成原始类型的值，再进行比较。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>] == <span class="number">1</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 Number([1]) == 1</span></div><div class="line"></div><div class="line">[<span class="number">1</span>] == <span class="string">'1'</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 String([1]) == Number('1')</span></div><div class="line"></div><div class="line">[<span class="number">1</span>] == <span class="literal">true</span> <span class="comment">// true</span></div><div class="line"><span class="comment">// 等同于 Number([1]) == Number(true)</span></div></pre></td></tr></table></figure>
<p>上面代码中，数组<code>[1]</code>分别与数值、字符串和布尔值进行比较，会先转成字符串或数值，再进行比较。比如，与数值<code>1</code>比较时，数组<code>[1]</code>会被自动转换成数值<code>1</code>，因此得到<code>true</code>。具体的对象类型转换规则，参见《数据类型转换》章节。</p>
<p><strong>（3）undefined和null</strong></p>
<p><code>undefined</code>和<code>null</code>与其他类型的值比较时，结果都为<code>false</code>，它们互相比较时结果为<code>true</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="literal">false</span> == <span class="literal">null</span> <span class="comment">// false</span></div><div class="line"><span class="literal">false</span> == <span class="literal">undefined</span> <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="number">0</span> == <span class="literal">null</span> <span class="comment">// false</span></div><div class="line"><span class="number">0</span> == <span class="literal">undefined</span> <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="literal">undefined</span> == <span class="literal">null</span> <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>绝大多数情况下，对象与<code>undefined</code>与<code>null</code>比较，都返回<code>false</code>。只有在对象转为原始值得到<code>undefined</code>时，才会返回<code>true</code>，这种情况是非常罕见的。</p>
<p><strong>（4）相等运算符的缺点</strong></p>
<p>相等运算符隐藏的类型转换，会带来一些违反直觉的结果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="string">''</span> == <span class="string">'0'</span>           <span class="comment">// false</span></div><div class="line"><span class="number">0</span> == <span class="string">''</span>             <span class="comment">// true</span></div><div class="line"><span class="number">0</span> == <span class="string">'0'</span>            <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="number">2</span> == <span class="literal">true</span>           <span class="comment">// false</span></div><div class="line"><span class="number">2</span> == <span class="literal">false</span>          <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="literal">false</span> == <span class="string">'false'</span>    <span class="comment">// false</span></div><div class="line"><span class="literal">false</span> == <span class="string">'0'</span>        <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="literal">false</span> == <span class="literal">undefined</span>  <span class="comment">// false</span></div><div class="line"><span class="literal">false</span> == <span class="literal">null</span>       <span class="comment">// false</span></div><div class="line"><span class="literal">null</span> == <span class="literal">undefined</span>   <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="string">' \t\r\n '</span> == <span class="number">0</span>     <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>上面这些表达式都很容易出错，因此不要使用相等运算符（<code>==</code>），最好只使用严格相等运算符（<code>===</code>）。</p>
<p><strong>（5）不相等运算符</strong></p>
<p>相等运算符有一个对应的“不相等运算符”（<code>!=</code>），两者的运算结果正好相反。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> != <span class="string">'1'</span> <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h2 id="布尔运算符"><a href="#布尔运算符" class="headerlink" title="布尔运算符"></a>布尔运算符</h2><p>布尔运算符用于将表达式转为布尔值，一共包含四个运算符。</p>
<ul>
<li>取反运算符：<code>!</code></li>
<li>且运算符：<code>&amp;&amp;</code></li>
<li>或运算符：<code>||</code></li>
<li>三元运算符：<code>?:</code></li>
</ul>
<h3 id="取反运算符（-）"><a href="#取反运算符（-）" class="headerlink" title="取反运算符（!）"></a>取反运算符（!）</h3><p>取反运算符形式上是一个感叹号，用于将布尔值变为相反值，即<code>true</code>变成<code>false</code>，<code>false</code>变成<code>true</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">!<span class="literal">true</span> <span class="comment">// false</span></div><div class="line">!<span class="literal">false</span> <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>对于非布尔值的数据，取反运算符会自动将其转为布尔值。规则是，以下六个值取反后为<code>true</code>，其他值取反后都为<code>false</code>。</p>
<ul>
<li><code>undefined</code></li>
<li><code>null</code></li>
<li><code>false</code></li>
<li><code>0</code>（包括<code>+0</code>和<code>-0</code>）</li>
<li><code>NaN</code></li>
<li>空字符串（<code>&#39;&#39;</code>）</li>
</ul>
<p>这意味着，取反运算符有转换数据类型的作用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">!<span class="literal">undefined</span> <span class="comment">// true</span></div><div class="line">!<span class="literal">null</span> <span class="comment">// true</span></div><div class="line">!<span class="number">0</span> <span class="comment">// true</span></div><div class="line">!<span class="literal">NaN</span> <span class="comment">// true</span></div><div class="line">!<span class="string">""</span> <span class="comment">// true</span></div><div class="line"></div><div class="line">!<span class="number">54</span> <span class="comment">// false</span></div><div class="line">!<span class="string">'hello'</span> <span class="comment">// false</span></div><div class="line">![] <span class="comment">// false</span></div><div class="line">!&#123;&#125; <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p>上面代码中，不管什么类型的值，经过取反运算后，都变成了布尔值。</p>
<p>如果对一个值连续做两次取反运算，等于将其转为对应的布尔值，与<code>Boolean</code>函数的作用相同。这是一种常用的类型转换的写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">!!x</div><div class="line"><span class="comment">// 等同于</span></div><div class="line"><span class="built_in">Boolean</span>(x)</div></pre></td></tr></table></figure>
<p>上面代码中，不管<code>x</code>是什么类型的值，经过两次取反运算后，变成了与<code>Boolean</code>函数结果相同的布尔值。所以，两次取反就是将一个值转为布尔值的简便写法。</p>
<p>取反运算符的这种将任意数据自动转为布尔值的功能，对下面三种布尔运算符（且运算符、或运算符、三元条件运算符）都成立。</p>
<h3 id="且运算符（-amp-amp-）"><a href="#且运算符（-amp-amp-）" class="headerlink" title="且运算符（&amp;&amp;）"></a>且运算符（&amp;&amp;）</h3><p>且运算符的运算规则是：如果第一个运算子的布尔值为<code>true</code>，则返回第二个运算子的值（注意是值，不是布尔值）；如果第一个运算子的布尔值为<code>false</code>，则直接返回第一个运算子的值，且不再对第二个运算子求值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="string">'t'</span> &amp;&amp; <span class="string">''</span> <span class="comment">// ""</span></div><div class="line"><span class="string">'t'</span> &amp;&amp; <span class="string">'f'</span> <span class="comment">// "f"</span></div><div class="line"><span class="string">'t'</span> &amp;&amp; (<span class="number">1</span> + <span class="number">2</span>) <span class="comment">// 3</span></div><div class="line"><span class="string">''</span> &amp;&amp; <span class="string">'f'</span> <span class="comment">// ""</span></div><div class="line"><span class="string">''</span> &amp;&amp; <span class="string">''</span> <span class="comment">// ""</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</div><div class="line">(<span class="number">1</span> - <span class="number">1</span>) &amp;&amp; ( x += <span class="number">1</span>) <span class="comment">// 0</span></div><div class="line">x <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>上面代码的最后一部分表示，由于且运算符的第一个运算子的布尔值为<code>false</code>，则直接返回它的值<code>0</code>，而不再对第二个运算子求值，所以变量<code>x</code>的值没变。</p>
<p>这种跳过第二个运算子的机制，被称为“短路”。有些程序员喜欢用它取代<code>if</code>结构，比如下面是一段<code>if</code>结构的代码，就可以用且运算符改写。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (i) &#123;</div><div class="line">  doSomething();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 等价于</span></div><div class="line"></div><div class="line">i &amp;&amp; doSomething();</div></pre></td></tr></table></figure>
<p>上面代码的两种写法是等价的，但是后一种不容易看出目的，也不容易除错，建议谨慎使用。</p>
<p>且运算符可以多个连用，这时返回第一个布尔值为<code>false</code>的表达式的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="literal">true</span> &amp;&amp; <span class="string">'foo'</span> &amp;&amp; <span class="string">''</span> &amp;&amp; <span class="number">4</span> &amp;&amp; <span class="string">'foo'</span> &amp;&amp; <span class="literal">true</span></div><div class="line"><span class="comment">// ''</span></div></pre></td></tr></table></figure>
<p>上面代码中第一个布尔值为<code>false</code>的表达式为第三个表达式，所以得到一个空字符串。</p>
<h3 id="或运算符（-）"><a href="#或运算符（-）" class="headerlink" title="或运算符（||）"></a>或运算符（||）</h3><p>或运算符（<code>||</code>）的运算规则是：如果第一个运算子的布尔值为<code>true</code>，则返回第一个运算子的值，且不再对第二个运算子求值；如果第一个运算子的布尔值为<code>false</code>，则返回第二个运算子的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">'t'</span> || <span class="string">''</span> <span class="comment">// "t"</span></div><div class="line"><span class="string">'t'</span> || <span class="string">'f'</span> <span class="comment">// "t"</span></div><div class="line"><span class="string">''</span> || <span class="string">'f'</span> <span class="comment">// "f"</span></div><div class="line"><span class="string">''</span> || <span class="string">''</span> <span class="comment">// ""</span></div></pre></td></tr></table></figure>
<p>短路规则对这个运算符也适用。</p>
<p>或运算符可以多个连用，这时返回第一个布尔值为true的表达式的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="literal">false</span> || <span class="number">0</span> || <span class="string">''</span> || <span class="number">4</span> || <span class="string">'foo'</span> || <span class="literal">true</span></div><div class="line"><span class="comment">// 4</span></div></pre></td></tr></table></figure>
<p>上面代码中第一个布尔值为<code>true</code>的表达式是第四个表达式，所以得到数值4。</p>
<p>或运算符常用于为一个变量设置默认值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveText</span>(<span class="params">text</span>) </span>&#123;</div><div class="line">  text = text || <span class="string">''</span>;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 或者写成</span></div><div class="line"></div><div class="line">saveText(<span class="keyword">this</span>.text || <span class="string">''</span>)</div></pre></td></tr></table></figure>
<p>上面代码表示，如果函数调用时，没有提供参数，则该参数默认设置为空字符串。</p>
<h3 id="三元条件运算符（-）"><a href="#三元条件运算符（-）" class="headerlink" title="三元条件运算符（?:）"></a>三元条件运算符（?:）</h3><p>三元条件运算符用问号（?）和冒号（:），分隔三个表达式。如果第一个表达式的布尔值为<code>true</code>，则返回第二个表达式的值，否则返回第三个表达式的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">'t'</span> ? <span class="string">'hello'</span> : <span class="string">'world'</span> <span class="comment">// "hello"</span></div><div class="line"><span class="number">0</span> ? <span class="string">'hello'</span> : <span class="string">'world'</span> <span class="comment">// "world"</span></div></pre></td></tr></table></figure>
<p>上面代码的<code>t</code>和<code>0</code>的布尔值分别为<code>true</code>和<code>false</code>，所以分别返回第二个和第三个表达式的值。</p>
<p>通常来说，三元条件表达式与<code>if...else</code>语句具有同样表达效果，前者可以表达的，后者也能表达。但是两者具有一个重大差别，<code>if...else</code>是语句，没有返回值；三元条件表达式是表达式，具有返回值。所以，在需要返回值的场合，只能使用三元条件表达式，而不能使用<code>if..else</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="literal">true</span> ? <span class="string">'T'</span> : <span class="string">'F'</span>);</div></pre></td></tr></table></figure>
<p>上面代码中，<code>console.log</code>方法的参数必须是一个表达式，这时就只能使用三元条件表达式。如果要用<code>if...else</code>语句，就必须改变整个代码写法了。</p>
<h2 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>位运算符用于直接对二进制位进行计算，一共有7个。</p>
<ul>
<li><p><strong>或运算</strong>（or）：符号为<code>|</code>，表示若两个二进制位都为0，则结果为0，否则为1。</p>
</li>
<li><p><strong>与运算</strong>（and）：符号为<code>&amp;</code>，表示若两个二进制位都为1，则结果为1，否则为0。</p>
</li>
<li><p><strong>否运算</strong>（not）：符号为<code>~</code>，表示对一个二进制位取反。</p>
</li>
<li><p><strong>异或运算</strong>（xor）：符号为<code>^</code>，表示若两个二进制位不相同，则结果为1，否则为0。</p>
</li>
<li><p><strong>左移运算</strong>（left shift）：符号为<code>&lt;&lt;</code>，详见下文解释。</p>
</li>
<li><p><strong>右移运算</strong>（right shift）：符号为<code>&gt;&gt;</code>，详见下文解释。</p>
</li>
<li><p><strong>带符号位的右移运算</strong>（zero filled right shift）：符号为<code>&gt;&gt;&gt;</code>，详见下文解释。</p>
</li>
</ul>
<p>这些位运算符直接处理每一个比特位（bit），所以是非常底层的运算，好处是速度极快，缺点是很不直观，许多场合不能使用它们，否则会使代码难以理解和查错。</p>
<p>有一点需要特别注意，位运算符只对整数起作用，如果一个运算子不是整数，会自动转为整数后再执行。另外，虽然在JavaScript内部，数值都是以64位浮点数的形式储存，但是做位运算的时候，是以32位带符号的整数进行运算的，并且返回值也是一个32位带符号的整数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">i = i | <span class="number">0</span>;</div></pre></td></tr></table></figure>
<p>上面这行代码的意思，就是将<code>i</code>（不管是整数或小数）转为32位整数。</p>
<p>利用这个特性，可以写出一个函数，将任意数值转为32位整数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toInt32</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> x | <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">toInt32(<span class="number">1.001</span>) <span class="comment">// 1</span></div><div class="line">toInt32(<span class="number">1.999</span>) <span class="comment">// 1</span></div><div class="line">toInt32(<span class="number">1</span>) <span class="comment">// 1</span></div><div class="line">toInt32(<span class="number">-1</span>) <span class="comment">// -1</span></div><div class="line">toInt32(<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">32</span>) + <span class="number">1</span>) <span class="comment">// 1</span></div><div class="line">toInt32(<span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">32</span>) - <span class="number">1</span>) <span class="comment">// -1</span></div></pre></td></tr></table></figure>
<p>上面代码中，最后两行得到<code>1</code>和<code>-1</code>，是因为一个整数大于32位的数位都会被舍去。</p>
<h3 id="“或运算”与“与运算”"><a href="#“或运算”与“与运算”" class="headerlink" title="“或运算”与“与运算”"></a>“或运算”与“与运算”</h3><p>这两种运算比较容易理解，就是逐位比较两个运算子。“或运算”的规则是，两个二进制位之中只要有一个为1，就返回1，否则返回0。“与运算”的规则是，两个二进制位之中只要有一个位为0，就返回0，否则返回1。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">0</span> | <span class="number">3</span> <span class="comment">// 3</span></div><div class="line"><span class="number">0</span> &amp; <span class="number">3</span> <span class="comment">// 0</span></div></pre></td></tr></table></figure>
<p>上面两个表达式，0和3的二进制形式分别是<code>00</code>和<code>11</code>，所以进行“或运算”会得到<code>11</code>（即3），进行“与运算”会得到<code>00</code>（即0）。</p>
<p>位运算只对整数有效，遇到小数时，会将小数部分舍去，只保留整数部分。所以，将一个小数与0进行或运算，等同于对该数去除小数部分，即取整数位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">2.9</span> | <span class="number">0</span> <span class="comment">// 2</span></div><div class="line"><span class="number">-2.9</span> | <span class="number">0</span> <span class="comment">// -2</span></div></pre></td></tr></table></figure>
<p>需要注意的是，这种取整方法不适用超过32位整数最大值2147483647的数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">2147483649.4</span> | <span class="number">0</span>;</div><div class="line"><span class="comment">// -2147483647</span></div></pre></td></tr></table></figure>
<h3 id="否运算"><a href="#否运算" class="headerlink" title="否运算"></a>否运算</h3><p>“否运算”将每个二进制位都变为相反值（0变为1，1变为0）。它的返回结果有时比较难理解，因为涉及到计算机内部的数值表示机制。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~ <span class="number">3</span> <span class="comment">// -4</span></div></pre></td></tr></table></figure>
<p>上面表达式对<code>3</code>进行“否运算”，得到<code>-4</code>。之所以会有这样的结果，是因为位运算时，JavaScirpt内部将所有的运算子都转为32位的二进制整数再进行运算。<code>3</code>在JavaScript内部是<code>00000000000000000000000000000011</code>，否运算以后得到<code>11111111111111111111111111111100</code>，由于第一位是1，所以这个数是一个负数。JavaScript内部采用补码形式表示负数，即需要将这个数减去1，再取一次反，然后加上负号，才能得到这个负数对应的10进制值。这个数减去1等于<code>11111111111111111111111111111011</code>，再取一次反得到<code>00000000000000000000000000000100</code>，再加上负号就是<code>-4</code>。考虑到这样的过程比较麻烦，可以简单记忆成，一个数与自身的取反值相加，等于-1。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~ <span class="number">-3</span> <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<p>上面表达式可以这样算，-3的取反值等于-1减去-3，结果为2。</p>
<p>对一个整数连续两次“否运算”，得到它自身。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~~<span class="number">3</span> <span class="comment">// 3</span></div></pre></td></tr></table></figure>
<p>所有的位运算都只对整数有效。否运算遇到小数时，也会将小数部分舍去，只保留整数部分。所以，对一个小数连续进行两次否运算，能达到取整效果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">~~<span class="number">2.9</span> <span class="comment">// 2</span></div><div class="line">~~<span class="number">47.11</span> <span class="comment">// 47</span></div><div class="line">~~<span class="number">1.9999</span> <span class="comment">// 1</span></div><div class="line">~~<span class="number">3</span> <span class="comment">// 3</span></div></pre></td></tr></table></figure>
<p>使用否运算取整，是所有取整方法中最快的一种。</p>
<p>对字符串进行否运算，JavaScript引擎会先调用Number函数，将字符串转为数值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 以下例子相当于~Number('011')</span></div><div class="line">~<span class="string">'011'</span>  <span class="comment">// -12</span></div><div class="line">~<span class="string">'42 cats'</span> <span class="comment">// -1</span></div><div class="line">~<span class="string">'0xcafebabe'</span> <span class="comment">// 889275713</span></div><div class="line">~<span class="string">'deadbeef'</span> <span class="comment">// -1</span></div><div class="line"></div><div class="line"><span class="comment">// 以下例子相当于~~Number('011')</span></div><div class="line">~~<span class="string">'011'</span>;        <span class="comment">// 11</span></div><div class="line">~~<span class="string">'42 cats'</span>;    <span class="comment">// 0</span></div><div class="line">~~<span class="string">'0xcafebabe'</span>; <span class="comment">// -889275714</span></div><div class="line">~~<span class="string">'deadbeef'</span>;   <span class="comment">// 0</span></div></pre></td></tr></table></figure>
<p>Number函数将字符串转为数值的规则，参见《数据的类型转换》一节。否运算对特殊数值的处理是：超出32位的整数将会被截去超出的位数，NaN和Infinity转为0。</p>
<p>对于其他类型的参数，否运算也是先用<code>Number</code>转为数值，然后再进行处理。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">~~[] <span class="comment">// 0</span></div><div class="line">~~<span class="literal">NaN</span> <span class="comment">// 0</span></div><div class="line">~~<span class="literal">null</span> <span class="comment">// 0</span></div></pre></td></tr></table></figure>
<h3 id="异或运算"><a href="#异或运算" class="headerlink" title="异或运算"></a>异或运算</h3><p>“异或运算”在两个二进制位不同时返回1，相同时返回0。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">0</span> ^ <span class="number">3</span> <span class="comment">// 3</span></div></pre></td></tr></table></figure>
<p>上面表达式中，<code>0</code>的二进制形式是<code>00</code>，<code>3</code>的二进制形式是<code>11</code>，它们每一个二进制位都不同，所以得到11（即3）。</p>
<p>“异或运算”有一个特殊运用，连续对两个数a和b进行三次异或运算，a&#710;=b, b&#710;=a, a&#710;=b，可以互换它们的值（详见<a href="http://en.wikipedia.org/wiki/XOR_swap_algorithm" target="_blank" rel="external">维基百科</a>）。这意味着，使用“异或运算”可以在不引入临时变量的前提下，互换两个变量的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line"><span class="keyword">var</span> b = <span class="number">99</span>;</div><div class="line"></div><div class="line">a ^= b, b ^= a, a ^= b;</div><div class="line"></div><div class="line">a <span class="comment">// 99</span></div><div class="line">b <span class="comment">// 10</span></div></pre></td></tr></table></figure>
<p>这是互换两个变量的值的最快方法。</p>
<p>异或运算也可以用来取整。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">12.9</span> ^ <span class="number">0</span> <span class="comment">// 12</span></div></pre></td></tr></table></figure>
<h3 id="左移运算符（-lt-lt-）"><a href="#左移运算符（-lt-lt-）" class="headerlink" title="左移运算符（&lt;&lt;）"></a>左移运算符（&lt;&lt;）</h3><p>左移运算符表示将一个数的二进制值向左移动指定的位数，尾部补0，即乘以2的指定次方（最高位即符号位不参与移动）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 4 的二进制形式为100，</span></div><div class="line"><span class="comment">// 左移一位为1000（即十进制的8）</span></div><div class="line"><span class="comment">// 相当于乘以2的1次方</span></div><div class="line"><span class="number">4</span> &lt;&lt; <span class="number">1</span></div><div class="line"><span class="comment">// 8</span></div><div class="line"></div><div class="line"><span class="number">-4</span> &lt;&lt; <span class="number">1</span></div><div class="line"><span class="comment">// -8</span></div></pre></td></tr></table></figure>
<p>上面代码中，<code>-4</code>左移一位得到<code>-8</code>，是因为<code>-4</code>的二进制形式是<code>11111111111111111111111111111100</code>，左移一位后得到<code>11111111111111111111111111111000</code>，该数转为十进制（减去1后取反，再加上负号）即为<code>-8</code>。</p>
<p>如果左移0位，就相当于将该数值转为32位整数，等同于取整，对于正数和负数都有效。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">13.5</span> &lt;&lt; <span class="number">0</span></div><div class="line"><span class="comment">// 13</span></div><div class="line"></div><div class="line"><span class="number">-13.5</span> &lt;&lt; <span class="number">0</span></div><div class="line"><span class="comment">// -13</span></div></pre></td></tr></table></figure>
<p>左移运算符用于二进制数值非常方便。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> color = &#123;<span class="attr">r</span>: <span class="number">186</span>, <span class="attr">g</span>: <span class="number">218</span>, <span class="attr">b</span>: <span class="number">85</span>&#125;;</div><div class="line"></div><div class="line"><span class="comment">// RGB to HEX</span></div><div class="line"><span class="comment">// (1 &lt;&lt; 24)的作用为保证结果是6位数</span></div><div class="line"><span class="keyword">var</span> rgb2hex = <span class="function"><span class="keyword">function</span>(<span class="params">r, g, b</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'#'</span> + ((<span class="number">1</span> &lt;&lt; <span class="number">24</span>) + (r &lt;&lt; <span class="number">16</span>) + (g &lt;&lt; <span class="number">8</span>) + b)</div><div class="line">    .toString(<span class="number">16</span>)</div><div class="line">    .substr(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">rgb2hex(color.r,color.g,color.b)</div><div class="line"><span class="comment">// "#bada55"</span></div></pre></td></tr></table></figure>
<p>上面代码使用左移运算符，将颜色的RGB值转为HEX值。</p>
<h3 id="右移运算符（-gt-gt-）"><a href="#右移运算符（-gt-gt-）" class="headerlink" title="右移运算符（&gt;&gt;）"></a>右移运算符（&gt;&gt;）</h3><p>右移运算符表示将一个数的二进制值向右移动指定的位数，头部补0，即除以2的指定次方（最高位即符号位不参与移动）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="number">4</span> &gt;&gt; <span class="number">1</span></div><div class="line"><span class="comment">// 2</span></div><div class="line"><span class="comment">/*</span></div><div class="line">// 因为4的二进制形式为00000000000000000000000000000100，</div><div class="line">// 右移一位得到00000000000000000000000000000010，</div><div class="line">// 即为十进制的2</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="number">-4</span> &gt;&gt; <span class="number">1</span></div><div class="line"><span class="comment">// -2</span></div><div class="line"><span class="comment">/*</span></div><div class="line">// 因为-4的二进制形式为11111111111111111111111111111100，</div><div class="line">// 右移一位，头部补1，得到11111111111111111111111111111110,</div><div class="line">// 即为十进制的-2</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>右移运算可以模拟2的整除运算。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="number">5</span> &gt;&gt; <span class="number">1</span></div><div class="line"><span class="comment">// 相当于 5 / 2 = 2</span></div><div class="line"></div><div class="line"><span class="number">21</span> &gt;&gt; <span class="number">2</span></div><div class="line"><span class="comment">// 相当于 21 / 4 = 5</span></div><div class="line"></div><div class="line"><span class="number">21</span> &gt;&gt; <span class="number">3</span></div><div class="line"><span class="comment">// 相当于 21 / 8 = 2</span></div><div class="line"></div><div class="line"><span class="number">21</span> &gt;&gt; <span class="number">4</span></div><div class="line"><span class="comment">// 相当于 21 / 16 = 1</span></div></pre></td></tr></table></figure>
<h3 id="带符号位的右移运算符（-gt-gt-gt-）"><a href="#带符号位的右移运算符（-gt-gt-gt-）" class="headerlink" title="带符号位的右移运算符（&gt;&gt;&gt;）"></a>带符号位的右移运算符（&gt;&gt;&gt;）</h3><p>该运算符表示将一个数的二进制形式向右移动，包括符号位也参与移动，头部补0。所以，该运算总是得到正值。对于正数，该运算的结果与右移运算符（&gt;&gt;）完全一致，区别主要在于负数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">4</span> &gt;&gt;&gt; <span class="number">1</span></div><div class="line"><span class="comment">// 2</span></div><div class="line"></div><div class="line"><span class="number">-4</span> &gt;&gt;&gt; <span class="number">1</span></div><div class="line"><span class="comment">// 2147483646</span></div><div class="line"><span class="comment">/*</span></div><div class="line">// 因为-4的二进制形式为11111111111111111111111111111100，</div><div class="line">// 带符号位的右移一位，得到01111111111111111111111111111110，</div><div class="line">// 即为十进制的2147483646。</div><div class="line">*/</div></pre></td></tr></table></figure>
<p>这个运算实际上将一个值转为32位无符号整数。</p>
<p>查看一个负整数在计算机内部的储存形式，最快的方法就是使用这个运算符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">-1</span> &gt;&gt;&gt; <span class="number">0</span> <span class="comment">// 4294967295</span></div></pre></td></tr></table></figure>
<p>上面代码表示，<code>-1</code>作为32位整数时，内部的储存形式使用无符号整数格式解读，值为 4294967295（即<code>(2^32)-1</code>，等于<code>11111111111111111111111111111111</code>）。</p>
<h3 id="开关作用"><a href="#开关作用" class="headerlink" title="开关作用"></a>开关作用</h3><p>位运算符可以用作设置对象属性的开关。</p>
<p>假定某个对象有四个开关，每个开关都是一个变量。那么，可以设置一个四位的二进制数，它的每个位对应一个开关。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> FLAG_A = <span class="number">1</span>; <span class="comment">// 0001</span></div><div class="line"><span class="keyword">var</span> FLAG_B = <span class="number">2</span>; <span class="comment">// 0010</span></div><div class="line"><span class="keyword">var</span> FLAG_C = <span class="number">4</span>; <span class="comment">// 0100</span></div><div class="line"><span class="keyword">var</span> FLAG_D = <span class="number">8</span>; <span class="comment">// 1000</span></div></pre></td></tr></table></figure>
<p>上面代码设置A、B、C、D四个开关，每个开关分别占有一个二进制位。</p>
<p>然后，就可以用“与运算”检验，当前设置是否打开了指定开关。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> flags = <span class="number">5</span>; <span class="comment">// 二进制的0101</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> (flags &amp; FLAG_C) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// 0101 &amp; 0100 =&gt; 0100 =&gt; true</span></div></pre></td></tr></table></figure>
<p>上面代码检验是否打开了开关<code>C</code>。如果打开，会返回<code>true</code>，否则返回<code>false</code>。</p>
<p>现在假设需要打开<code>A``B``D</code>三个开关，我们可以构造一个掩码变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mask = FLAG_A | FLAG_B | FLAG_D;</div><div class="line"><span class="comment">// 0001 | 0010 | 1000 =&gt; 1011</span></div></pre></td></tr></table></figure>
<p>上面代码对<code>A``B``D</code>三个变量进行“或运算”，得到掩码值为二进制的<code>1011</code>。</p>
<p>有了掩码，“或运算”可以确保打开指定的开关。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">flags = flags | mask;</div></pre></td></tr></table></figure>
<p>“与运算”可以将当前设置中凡是与开关设置不一样的项，全部关闭。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">flags = flags &amp; mask;</div></pre></td></tr></table></figure>
<p>“异或运算”可以切换（toggle）当前设置，即第一次执行可以得到当前设置的相反值，再执行一次又得到原来的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">flags = flags ^ mask;</div></pre></td></tr></table></figure>
<p>“否运算”可以翻转当前设置，即原设置为<code>0</code>，运算后变为<code>1</code>；原设置为<code>1</code>，运算后变为<code>0</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">flags = ~flags;</div></pre></td></tr></table></figure>
<h2 id="其他运算符"><a href="#其他运算符" class="headerlink" title="其他运算符"></a>其他运算符</h2><h3 id="void运算符"><a href="#void运算符" class="headerlink" title="void运算符"></a>void运算符</h3><p><code>void</code>运算符的作用是执行一个表达式，然后不返回任何值，或者说返回<code>undefined</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> <span class="number">0</span> <span class="comment">// undefined</span></div><div class="line"><span class="keyword">void</span>(<span class="number">0</span>) <span class="comment">// undefined</span></div></pre></td></tr></table></figure>
<p>上面是<code>void</code>运算符的两种写法，都正确。建议采用后一种形式，即总是使用括号。因为<code>void</code>运算符的优先性很高，如果不使用括号，容易造成错误的结果。比如，<code>void 4 + 7</code>实际上等同于<code>(void 4) + 7</code>。</p>
<p>下面是<code>void</code>运算符的一个例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">3</span>;</div><div class="line"><span class="keyword">void</span> (x = <span class="number">5</span>) <span class="comment">//undefined</span></div><div class="line">x <span class="comment">// 5</span></div></pre></td></tr></table></figure>
<p>这个运算符主要是用于书签工具（bookmarklet），以及用于在超级链接中插入代码，目的是返回<code>undefined</code>可以防止网页跳转。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:void window.open('http://example.com/')"</span>&gt;</span></div><div class="line">  点击打开新窗口</div><div class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上面代码用于在网页中创建一个链接，点击后会打开一个新窗口。如果没有<code>void</code>，点击后就会在当前窗口打开链接。</p>
<p>下面是常见的网页中触发鼠标点击事件的写法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com"</span> <span class="attr">onclick</span>=<span class="string">"f();"</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上面代码有一个问题，函数<code>f</code>必须返回<code>false</code>，或者说<code>onclick</code>事件必须返回<code>false</code>，否则会引起浏览器跳转到<code>example.com</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// some code</span></div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者写成</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com"</span> <span class="attr">onclick</span>=<span class="string">"f();return false;"</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>void</code>运算符可以取代上面两种写法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript: void(f())"</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>下面的代码会提交表单，但是不会产生页面跳转。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript: void(document.form.submit())"</span>&gt;</span></div><div class="line">文字<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="逗号运算符"><a href="#逗号运算符" class="headerlink" title="逗号运算符"></a>逗号运算符</h3><p>逗号运算符用于对两个表达式求值，并返回后一个表达式的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="string">'a'</span>, <span class="string">'b'</span> <span class="comment">// "b"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> y = (x++, <span class="number">10</span>);</div><div class="line">x <span class="comment">// 1</span></div><div class="line">y <span class="comment">// 10</span></div></pre></td></tr></table></figure>
<p>上面代码中，逗号运算符返回后一个表达式的值。</p>
<h2 id="运算顺序"><a href="#运算顺序" class="headerlink" title="运算顺序"></a>运算顺序</h2><h3 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h3><p>JavaScript各种运算符的优先级别（Operator Precedence）是不一样的。优先级高的运算符先执行，优先级低的运算符后执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">4</span> + <span class="number">5</span> * <span class="number">6</span> <span class="comment">// 34</span></div></pre></td></tr></table></figure>
<p>上面的代码中，乘法运算符（<code>*</code>）的优先性高于加法运算符（<code>+</code>），所以先执行乘法，再执行加法，相当于下面这样。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">4</span> + (<span class="number">5</span> * <span class="number">6</span>) <span class="comment">// 34</span></div></pre></td></tr></table></figure>
<p>如果多个运算符混写在一起，常常会导致令人困惑的代码。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> arr = [];</div><div class="line"></div><div class="line"><span class="keyword">var</span> y = arr.length &lt;= <span class="number">0</span> || arr[<span class="number">0</span>] === <span class="literal">undefined</span> ? x : arr[<span class="number">0</span>];</div></pre></td></tr></table></figure>
<p>上面代码中，变量<code>y</code>的值就很难看出来，因为这个表达式涉及5个运算符，到底谁的优先级最高，实在不容易记住。</p>
<p>根据语言规格，这五个运算符的优先级从高到低依次为：小于等于（<code>&lt;=</code>)、严格相等（<code>===</code>）、或（<code>||</code>）、三元（<code>?:</code>）、等号（<code>=</code>）。因此上面的表达式，实际的运算顺序如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> y = ((arr.length &lt;= <span class="number">0</span>) || (arr[<span class="number">0</span>] === <span class="literal">undefined</span>)) ? x : arr[<span class="number">0</span>];</div></pre></td></tr></table></figure>
<p>记住所有运算符的优先级，是非常难的，也是没有必要的。</p>
<h3 id="圆括号的作用"><a href="#圆括号的作用" class="headerlink" title="圆括号的作用"></a>圆括号的作用</h3><p>圆括号（<code>()</code>）可以用来提高运算的优先级，因为它的优先级是最高的，即圆括号中的表达式会第一个运算。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="number">4</span> + <span class="number">5</span>) * <span class="number">6</span> <span class="comment">// 54</span></div></pre></td></tr></table></figure>
<p>上面代码中，由于使用了圆括号，加法会先于乘法执行。</p>
<p>由于运算符的优先级别十分繁杂，且都是来自硬性规定，因此建议总是使用圆括号，保证运算顺序清晰可读，这对代码的维护和除错至关重要。</p>
<p>顺便说一下，圆括号不是运算符，而是一种语法结构。它一共有两种用法：一种是把表达式放在圆括号之中，提升运算的优先级；另一种是跟在函数的后面，作用是调用函数。</p>
<p>注意，因为圆括号不是运算符，所以不具有求值作用，只改变运算的优先级。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</div><div class="line">(x) = <span class="number">2</span>;</div></pre></td></tr></table></figure>
<p>上面代码的第二行，如果圆括号具有求值作用，那么就会变成<code>1 = 2</code>，这是会报错了。但是，上面的代码可以运行，这验证了圆括号只改变优先级，不会求值。</p>
<p>这也意味着，如果整个表达式都放在圆括号之中，那么不会有任何效果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(exprssion)</div><div class="line"><span class="comment">// 等同于</span></div><div class="line">expression</div></pre></td></tr></table></figure>
<p>函数放在圆括号中，会返回函数本身。如果圆括号紧跟在函数的后面，就表示调用函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(f) <span class="comment">// function f()&#123;return 1;&#125;</span></div><div class="line">f() <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>上面代码中，函数放在圆括号之中会返回函数本身，圆括号跟在函数后面则是调用函数。</p>
<p>圆括号之中，只能放置表达式，如果将语句放在圆括号之中，就会报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="keyword">var</span> a = <span class="number">1</span>)</div><div class="line"><span class="comment">// SyntaxError: Unexpected token var</span></div></pre></td></tr></table></figure>
<h3 id="左结合与右结合"><a href="#左结合与右结合" class="headerlink" title="左结合与右结合"></a>左结合与右结合</h3><p>对于优先级别相同的运算符，大多数情况，计算顺序总是从左到右，这叫做运算符的“左结合”（left-to-right associativity），即从左边开始计算。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x + y + z</div></pre></td></tr></table></figure>
<p>上面代码先计算最左边的<code>x</code>与<code>y</code>的和，然后再计算与<code>z</code>的和。</p>
<p>但是少数运算符的计算顺序是从右到左，即从右边开始计算，这叫做运算符的“右结合”（right-to-left associativity）。其中，最主要的是赋值运算符（<code>=</code>）和三元条件运算符（<code>?:</code>）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">w = x = y = z;</div><div class="line">q = a ? b : c ? d : e ? f : g;</div></pre></td></tr></table></figure>
<p>上面代码的运算结果，相当于下面的样子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">w = (x = (y = z));</div><div class="line">q = a ? b : (c ? d : (e ? f : g));</div></pre></td></tr></table></figure>
<p>上面的两行代码，各有三个等号运算符和三个三元运算符，都是先计算最右边的那个运算符。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li>Michal Budzynski, <a href="http://michalbe.blogspot.co.uk/2013/03/javascript-less-known-parts-bitwise.html" target="_blank" rel="external">JavaScript: The less known parts. Bitwise Operators</a></li>
<li>Axel Rauschmayer, <a href="http://www.2ality.com/2013/06/basic-javascript.html" target="_blank" rel="external">Basic JavaScript for the impatient programmer</a></li>
<li>Mozilla Developer Network, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators" target="_blank" rel="external">Bitwise Operators</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/12/30/5. string/" rel="next" title="字符串（五）">
                <i class="fa fa-chevron-left"></i> 字符串（五）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/30/7. controll/" rel="prev" title="流程控制语句（七）">
                流程控制语句（七） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/12/30/6. operator/"
           data-title="运算符（六）" data-url="openexw.github.io/2016/12/30/6. operator/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Openoter" />
          <p class="site-author-name" itemprop="name">Openoter</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#加法运算符"><span class="nav-number">1.</span> <span class="nav-text">加法运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#算术运算符"><span class="nav-number">2.</span> <span class="nav-text">算术运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#余数运算符"><span class="nav-number">2.1.</span> <span class="nav-text">余数运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自增和自减运算符"><span class="nav-number">2.2.</span> <span class="nav-text">自增和自减运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数值运算符，负数值运算符"><span class="nav-number">2.3.</span> <span class="nav-text">数值运算符，负数值运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#赋值运算符"><span class="nav-number">3.</span> <span class="nav-text">赋值运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较运算符"><span class="nav-number">4.</span> <span class="nav-text">比较运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#比较运算符的算法"><span class="nav-number">4.1.</span> <span class="nav-text">比较运算符的算法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串的比较"><span class="nav-number">4.2.</span> <span class="nav-text">字符串的比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#严格相等运算符"><span class="nav-number">4.3.</span> <span class="nav-text">严格相等运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#相等运算符"><span class="nav-number">4.4.</span> <span class="nav-text">相等运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#布尔运算符"><span class="nav-number">5.</span> <span class="nav-text">布尔运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#取反运算符（-）"><span class="nav-number">5.1.</span> <span class="nav-text">取反运算符（!）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#且运算符（-amp-amp-）"><span class="nav-number">5.2.</span> <span class="nav-text">且运算符（&&）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#或运算符（-）"><span class="nav-number">5.3.</span> <span class="nav-text">或运算符（||）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三元条件运算符（-）"><span class="nav-number">5.4.</span> <span class="nav-text">三元条件运算符（?:）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#位运算符"><span class="nav-number">6.</span> <span class="nav-text">位运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#简介"><span class="nav-number">6.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#“或运算”与“与运算”"><span class="nav-number">6.2.</span> <span class="nav-text">“或运算”与“与运算”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#否运算"><span class="nav-number">6.3.</span> <span class="nav-text">否运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异或运算"><span class="nav-number">6.4.</span> <span class="nav-text">异或运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#左移运算符（-lt-lt-）"><span class="nav-number">6.5.</span> <span class="nav-text">左移运算符（<<）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#右移运算符（-gt-gt-）"><span class="nav-number">6.6.</span> <span class="nav-text">右移运算符（>>）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#带符号位的右移运算符（-gt-gt-gt-）"><span class="nav-number">6.7.</span> <span class="nav-text">带符号位的右移运算符（>>>）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开关作用"><span class="nav-number">6.8.</span> <span class="nav-text">开关作用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他运算符"><span class="nav-number">7.</span> <span class="nav-text">其他运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#void运算符"><span class="nav-number">7.1.</span> <span class="nav-text">void运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逗号运算符"><span class="nav-number">7.2.</span> <span class="nav-text">逗号运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算顺序"><span class="nav-number">8.</span> <span class="nav-text">运算顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#优先级"><span class="nav-number">8.1.</span> <span class="nav-text">优先级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#圆括号的作用"><span class="nav-number">8.2.</span> <span class="nav-text">圆括号的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#左结合与右结合"><span class="nav-number">8.3.</span> <span class="nav-text">左结合与右结合</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考链接"><span class="nav-number">9.</span> <span class="nav-text">参考链接</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Openoter</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"openoter"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  










  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("4yBJ2Rhasby0Upv2IyRBIVoL-gzGzoHsz", "1PbbYpUV9yyYNVg3dxqKeACK");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
